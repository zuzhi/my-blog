{:title "Quick Start Guide"
 :layout :post
 :tags  ["cryogen"]
 :toc true}

This intro only documents a subset of Cryogen's features. For additional documentation please see the [cryogen site](http://cryogenweb.org).

## Features

* Blog posts and pages with Markdown (default) or AsciiDoc
* Tags
* Table of contents generation
* Plain HTML page templates
* Code syntax highlighting
* Disqus support
* Sitemap generation
* RSS feed generation
* Sass/SCSS compilation
* Klipse Integration

## Prerequisites

You will need [Leiningen][1] 2.5.0 or above installed.

[1]: https://github.com/technomancy/leiningen

## Usage

### Creating a New Site

A new site can be created using the Cryogen template as follows:

```
lein new cryogen my-blog
```

or, alternatively, using [`clj-new`](https://github.com/seancorfield/clj-new/) (and having defined the `new` profile, as it suggests):

```
clojure -X:new create :template cryogen :name me.my-blog
```

### Running the Server

The web server can be started from the `my-blog` directory using either Leiningen:

```bash
lein serve # or lein serve-fast
```

or tools-deps:

```bash
clojure -X:serve # or clojure -X:serve-fast
```

The server will watch for changes in the `content` and `themes` folders and recompile the content automatically. The `*-fast` variants perform [fast but partial compilation](https://cryogenweb.org/docs/fast-compilation.html) of only the changed page/post.

You can also generate the content without bringing up a server either via:

```
lein run
```

or via:

```
clojure -M:build
```

### Site Configuration

The site configuration file is found at `content/config.edn`, this file looks as follows:

```clojure
{:site-title                   "My Awesome Blog"
 :author                       "Bob Bobbert"
 :description                  "This blog is awesome"
 :site-url                     "http://blogawesome.com/"
 :post-root                    "posts"
 :page-root                    "pages"
 :post-root-uri                "posts-output"
 :page-root-uri                "pages-output"
 :tag-root-uri                 "tags-output"
 :author-root-uri              "authors-output"
 :public-dest                  "public"
 :blog-prefix                  "/blog"
 :rss-name                     "feed.xml"
 :rss-filters                  ["cryogen"]
 :recent-posts                 3
 :post-date-format             "yyyy-MM-dd"
 :archive-group-format         "yyyy MMMM"
 :sass-src                     []
 :sass-path                    "sass"
 :theme                        "blue"
 :resources                    ["img"]
 :keep-files                   [".git"]
 :disqus?                      false
 :disqus-shortname             ""
 :ignored-files                [#"\.#.*" #".*\.swp$"]
 :previews?                    false
 :posts-per-page               5
 :blocks-per-preview           2
 :clean-urls                   :trailing-slash
 :collapse-subdirs?            false
 :hide-future-posts?           true
 :klipse                       {}
 :description-include-elements #{:p :h1 :h2 :h3 :h4 :h5 :h6}
 :debug?                       false}
```

For information about each key please see the ["Configuration"](http://cryogenweb.org/docs/configuration.html) portion of the Cryogen documentation site.

### Switching between Markdown and AsciiDoc

Cryogen comes with Markdown support as default. If you want to use AsciiDoc instead, open the `project.clj` in your created blog (e.g. `my-blog`), and change the line in `:dependencies` that says `cryogen-markdown` to `cryogen-asciidoc` (and ensure the right version).
Instead of looking for files ending in `.md` in the `content/md` directory, the compiler will now look for files ending in `.asc` in the `content/asc` directory.

### Selecting a Theme

The Cryogen template comes with three themes in the `themes` folder. To change your blog's theme, change the value of the `:theme` key in `config.edn`. Note that the Nucleus theme is obtained from [downloadwebsitetemplates.co.uk](http://www.downloadwebsitetemplates.co.uk/template/nucleus/) that requires you to keep the footer, unless you make a donation on their website.

### Customizing Layouts

Cryogen uses [Selmer](https://github.com/yogthos/Selmer) templating engine for layouts. Please refer to its documentation to see the supported tags and filters for the layouts.

The layouts are contained in the `themes/{theme}/html` folder of the project. By default, the `base.html` layout is used to provide the general layout for the site. This is where you would add static resources such as CSS and JavaScript assets as well as define headers and footers for your site.

Each page layout should have a name that matches the `:layout` key in the page metadata and end with `.html`. Page layouts extend the base layout and should only contain the content relevant to the page inside the `content` block.
For example, the `tag` layout is located in `tag.html` and looks as follows:

```xml
{% extends "/html/base.html" %}
{% block content %}
<div id="posts-by-tag">
    <h2>Posts tagged {{name}}</h2>
    <ul>
    {% for post in posts %}
        <li>
            <a href="{{post.uri}}">{{post.title}}</a>
        </li>
    {% endfor %}
    </ul>
</div>
{% endblock %}
```

### Code Syntax Highlighting

Cryogen uses [Highlight.js](https://highlightjs.org/) for code syntax highlighting. You can add more languages by replacing `themes/{theme}/js/highlight.pack.js` with a customized package from [here](https://highlightjs.org/download/).

The ` initHighlightingOnLoad` function is called in `themes/{theme}/html/base.html`.

```xml
<script>hljs.initHighlightingOnLoad();</script>
```

## Deploying Your Site

The generated static content will be found under the `public` folder. Simply copy the content to a static
folder for a server such as Nginx or Apache and your site is now ready for service.

A sample Nginx configuration that's placed in `/etc/nginx/sites-available/default` can be seen below:

```javascript
server {
  listen 80 default_server;
  listen [::]:80 default_server ipv6only=on;
  server_name localhost <yoursite.com> <www.yoursite.com>;

  access_log  /var/log/blog_access.log;
  error_log   /var/log/blog_error.log;

  location / {
    alias       /var/blog/;
    error_page  404 = /404.html;
  }
}
```

Simply set `yoursite.com` to the domain of your site in the above configuration and
ensure the static content is available at `/var/blog/`. Finally, place your custom error page
in the `/var/blog/404.html` file.

More information on deployment can be found [here](http://cryogenweb.org/docs/deploying-to-github-pages.html).

## Third Party Libraries

#### https://github.com/greywolve/cryogen-markdown-external

A Clojure library to provide Markdown rendering to the cryogen-core compiler by using an external command/program, such as pandoc.



## Some Sites Made With Cryogen

* [My personal blog](http://carmen.la/blog/archives)
* [Cryogen Documentation Site](http://cryogenweb.org)
* [Yogthos' blog](http://yogthos.net/)
* [Chad Stovern's blog](http://www.chadstovern.com)
* [szcz](http://www.szcz.org/)
* [ISvit blog](https://blog.isvit.info)
* [Lambda Funk](http://lambdafunk.com)
* [DDFT.wiki](https://ddft.wiki)


---

这篇文章是 Cryogen 自带的文档，我没有把它删掉，顺手翻译为中文，以下为译文。

---


本简介仅记录了 Cryogen 功能的一部分。有关其他文档，请参见 [Cryogen 官网](http://cryogenweb.org).

## 特性

* 博客文章和页面支持 Markdown（默认）或 AsciiDoc 两种格式
* 标签
* 目录生成
* 纯 HTML 页面模板
* 代码语法高亮
* Disqus 支持
* 网站地图生成
* RSS 源生成
* Sass/SCSS 编译
* 集成 Klipse

## 先决条件

你将需要安装 [Leiningen][1] 2.5.0 或更高版本。

[1]: https://github.com/technomancy/leiningen

## 用法

### 创建一个新站点

你可以使用 Cryogen 模板创建一个新站点，如下所示：

```bash
lein new cryogen my-blog
```

或者，你也可以使用 [clj-new](https://github.com/seancorfield/clj-new/)（并已定义了 `new` 配置文件，如建议的那样 and having defined the new profile, as it suggests）：

```bash
clojure -X:new create :template cryogen :name me.my-blog
```

### 运行服务器

可以使用 Leiningen 从 `my-blog` 文件夹启动 Web 服务器：
The web server can be started from the `my-blog` directory using either Leiningen:

```bash
lein serve # or lein serve-fast
```

或者用 tools-deps：

```bash
clojure -X:serve # or clojure -X:serve-fast
```

服务器将监视 `content` 和 `themes` 文件夹中的更改，并自动重新编译内容。对应命令的 `*-fast` 变体能进行快速，只对修改的页面/文章进行[快速但只是部分的编译](https://cryogenweb.org/docs/fast-compilation.html)。

你也可以通过以下方式生成内容而无需启动服务器：

```bash
lein run
```

或通过：

```bash
clojure -M:build
```

### 网站配置

站点配置文件位于 `content/config.edn`，文件内容如下所示：

```clojure
{:site-title                   "My Awesome Blog"
 :author                       "Bob Bobbert"
 :description                  "This blog is awesome"
 :site-url                     "http://blogawesome.com/"
 :post-root                    "posts"
 :page-root                    "pages"
 :post-root-uri                "posts-output"
 :page-root-uri                "pages-output"
 :tag-root-uri                 "tags-output"
 :author-root-uri              "authors-output"
 :public-dest                  "public"
 :blog-prefix                  "/blog"
 :rss-name                     "feed.xml"
 :rss-filters                  ["cryogen"]
 :recent-posts                 3
 :post-date-format             "yyyy-MM-dd"
 :archive-group-format         "yyyy MMMM"
 :sass-src                     []
 :sass-path                    "sass"
 :theme                        "blue"
 :resources                    ["img"]
 :keep-files                   [".git"]
 :disqus?                      false
 :disqus-shortname             ""
 :ignored-files                [#"\.#.*" #".*\.swp$"]
 :previews?                    false
 :posts-per-page               5
 :blocks-per-preview           2
 :clean-urls                   :trailing-slash
 :collapse-subdirs?            false
 :hide-future-posts?           true
 :klipse                       {}
 :description-include-elements #{:p :h1 :h2 :h3 :h4 :h5 :h6}
 :debug?                       false}
```

关于每个键的信息，请参见 Cryogen 文档站点的[“配置”](http://cryogenweb.org/docs/configuration.html)部分。

### 在 Markdown 和 AsciiDoc 之间切换

Cryogen 默认提供对 Markdown 支持。如果你想使用 AsciiDoc，从你刚创建的博客目录（例如：`my-blog`）下打开 `project.clj`，并更改 `:dependencies` 下面包含 `cryogen-markdown` 的那一行，把它改成 `cryogen-asciidoc`。这样，编译器将不再从 `content/md` 下查找以 `.md` 结尾的文件，而是在 `content/asc` 目录下查找以 `.asc` 结尾的文件。

### 选择主题

Cryogen 模板在 `themes` 文件夹中自带了三个主题。要更改博客的主题，需要更改 `config.edn` 中的 `:theme` 键值。请注意，Nucleus 主题是从 [downloadwebsitetemplates.co.uk](http://www.downloadwebsitetemplates.co.uk/template/nucleus/) 获得的，除非你在其网站上进行捐赠，否则你需要保留页脚。

### 自定义布局

Cryogen 使用 [Selmer](https://github.com/yogthos/Selme) 模板引擎进行布局。请参阅其文档，以查看受支持的布局标签和过滤器。

布局包含在 `themes/{theme}/html` 项目文件夹中。默认情况下，该 `base.html` 布局用于提供网站的常规布局。你可以在这个文件中添加静态资源（例如 CSS 和 JavaScript 资源）以及为网站定义页眉和页脚。

每个页面布局的名称都应与 `:layout` 页面元数据中的键相匹配，并以结尾.html。页面布局扩展了基本布局，并且只应在 `content` 块内包含与页面相关的内容。例如，`tag` 布局位于 `tag.html` 文件中，看起来是这样的：

```xml
{% extends "/html/base.html" %}
{% block content %}
<div id="posts-by-tag">
    <h2>Posts tagged {{name}}</h2>
    <ul>
    {% for post in posts %}
        <li>
            <a href="{{post.uri}}">{{post.title}}</a>
        </li>
    {% endfor %}
    </ul>
</div>
{% endblock %}
```

### 代码语法高亮显示

Cryogen 使用 [Highlight.js](https://highlightjs.org/) 进行代码语法高亮显示。你可以从[这里](https://highlightjs.org/download/)下载自定义包并通过替换 `themes/{theme}/js/highlight.pack.js` 来添加更多语言。

`initHighlightingOnLoad` 函数是在 `themes/{theme}/html/base.html` 文件中被调用的。

```xml
<script>hljs.initHighlightingOnLoad();</script>
```

## 部署你的网站

生成的静态内容将在 `public` 文件夹下找到。只需将内容复制到服务器（例如Nginx或Apache）的静态文件夹中，您的站点就可以使用了。
The generated static content will be found under the `public` folder. Simply copy the content to a static
folder for a server such as Nginx or Apache and your site is now ready for service.

放置在其中的示例Nginx配置/etc/nginx/sites-available/default如下所示：
A sample Nginx configuration that's placed in `/etc/nginx/sites-available/default` can be seen below:

```javascript
server {
  listen 80 default_server;
  listen [::]:80 default_server ipv6only=on;
  server_name localhost <yoursite.com> <www.yoursite.com>;

  access_log  /var/log/blog_access.log;
  error_log   /var/log/blog_error.log;

  location / {
    alias       /var/blog/;
    error_page  404 = /404.html;
  }
}
```

只需yoursite.com在上述配置中将其设置为站点的域，并确保可以在上找到静态内容/var/blog/。最后，将您的自定义错误页面放置在/var/blog/404.html文件中。
Simply set `yoursite.com` to the domain of your site in the above configuration and
ensure the static content is available at `/var/blog/`. Finally, place your custom error page
in the `/var/blog/404.html` file.

可以在此处找到有关部署的更多信息。
More information on deployment can be found [here](http://cryogenweb.org/docs/deploying-to-github-pages.html).

## Third Party Libraries/第三方图书馆

#### https://github.com/greywolve/cryogen-markdown-external

Clojure库通过使用外部命令/程序（例如pandoc）为低温核心编译器提供Markdown渲染。
A Clojure library to provide Markdown rendering to the cryogen-core compiler by using an external command/program, such as pandoc.



## Some Sites Made With Cryogen/一些用冷冻剂制成的网站

* [My personal blog](http://carmen.la/blog/archives)
* [Cryogen Documentation Site](http://cryogenweb.org)
* [Yogthos' blog](http://yogthos.net/)
* [Chad Stovern's blog](http://www.chadstovern.com)
* [szcz](http://www.szcz.org/)
* [ISvit blog](https://blog.isvit.info)
* [Lambda Funk](http://lambdafunk.com)
* [DDFT.wiki](https://ddft.wiki)
